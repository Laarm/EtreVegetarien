{% extends 'base.html.twig' %}

{% block title %}{{ restaurant.nom }} - Être Végétarien!{% endblock %}
{% block stylesheets %}
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
    integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
    crossorigin="" />
<link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.4.1/MarkerCluster.Default.css">
{% endblock %}
{% block body %}

<style>
    #restaurant h1 {
        color: #4e4e56;
        font-size: 2em;
        font-weight: bold;
    }

    #restaurant p {
        color: #939396;
    }

    #restaurant h2 {
        color: #939396;
        font-size: 1.2em;
        margin-top: 20px
    }

    #restaurant .left .flex.flex-between {
        align-items: center;
    }

    #restaurant h1.titre {
        font-size: 1.4em
    }

    #restaurant .left .note span {
        font-size: 2em;
        font-weight: bold;
    }

    #restaurant .left .note span {
        font-size: 2em;
        font-weight: bold;
        color: #4e4e56;
    }

    #restaurant .left .avis {
        margin-top: -8px
    }

    .tab-pane.fade {
        padding-top: 40px
    }

    .nav.nav-tabs {
        padding-top: 40px
    }

    .nav.nav-tabs {
        border: none
    }

    .nav.nav-tabs li.nav-item a {
        border: none;
        color: #4e4e56;
    }

    .nav.nav-tabs li.nav-item a.active {
        border: none;
        border-bottom: #58D68D 6px solid
    }

    #restaurant .avis span.date {
        color: #58D68D;
        margin-top: -13px;
        display: block;
    }

    #restaurant .avis .message {
        padding: 7.5px 0px 7.5px 15px;
        border-left: #939396 1px solid;
        margin-top: 13px
    }

    #restaurant .avis .username {
        font-weight: bold;
    }

    #restaurant #avis hr {
        margin: 40px 0
    }

    #map {
        height: 300px;
        width: 100%;
    }
</style>
<section id="restaurant" class="container paddingSeperateur flex">
    <div class="left col-7">
        <div class="flex flex-between">
            <h1 class="mtb-auto">{{ restaurant.nom }}</h1>
            <p class="note mtb-auto"><span>10</span>/10</p>
        </div>
        <div class="flex flex-between">
            <h2 class="mtb-auto">{{ restaurant.adresse }}</h2>
            <p class="avis mtb-auto">4 avis</p>
        </div>
        <div class="w-100">
            <ul class="nav nav-tabs" id="tab" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="infospratiques-tab" data-toggle="tab" href="#infospratiques"
                        role="tab" aria-controls="infospratiques" aria-selected="true">INFOS PRATIQUES</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="avis-tab" data-toggle="tab" href="#avis" role="tab" aria-controls="avis"
                        aria-selected="false">AVIS</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="plan-tab" data-toggle="tab" href="#plan" role="tab" aria-controls="plan"
                        aria-selected="false">PLAN</a>
                </li>
            </ul>
            <div class="tab-content" id="tabContent">
                <div class="tab-pane fade show active" id="infospratiques" role="tabpanel"
                    aria-labelledby="infospratiques-tab">
                    {{ restaurant.contenu | raw }}
                </div>
                <div class="tab-pane fade" id="avis" role="tabpanel" aria-labelledby="avis-tab">
                    <div class="avis">
                        <p class="username">Arnaud</p>
                        <span class="date">publié le 14 avril 2000</span>
                        <p class="message">Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium
                            doloremque laudantium, totam rem aperiam,
                            eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt
                            explicabo. Nemo enim ipsam
                            voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni
                            dolores
                            eos qui ratione
                            voluptatem sequi nesciunt.</p>
                    </div>
                    <hr>
                    <div class="avis">
                        <p class="username">Arnaud</p>
                        <span class="date">publié le 14 avril 2000</span>
                        <p class="message">Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium
                            doloremque laudantium, totam rem aperiam,
                            eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt
                            explicabo. Nemo enim ipsam
                            voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni
                            dolores
                            eos qui ratione
                            voluptatem sequi nesciunt.</p>
                    </div>
                </div>
                <div class="tab-pane fade" id="plan" role="tabpanel" aria-labelledby="plan-tab">
                    <div id="map"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="right col-5">
        <h1>
            <h1 class="titre"><span>Autres restaurants</span></h1>
        </h1>
    </div>
</section>
{% endblock %}
{% block javascript %}
<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
    integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
    crossorigin=""></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.4.1/leaflet.markercluster.js"></script>
<script>
    $.getJSON("https://api-adresse.data.gouv.fr/search/?q={{ restaurant.adresse }}&limit=1")
        .then((restaurant) => {
            lat = restaurant.features[0]['geometry']['coordinates'][1];
            lon = restaurant.features[0]['geometry']['coordinates'][0];
            initMap();
        });
    var macarte = null;
    function initMap() {
        macarte = L.map('map').setView([lat, lon], 16);
        macarte.panTo(L.latLng(lat, lon));
        L.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {
            attribution: 'données © <a href="//osm.org/copyright">OpenStreetMap</a>/ODbL - rendu <a href="//openstreetmap.fr">OSM France</a>',
            minZoom: 1,
            maxZoom: 20
        }).addTo(macarte);
        var marker = L.marker([lat, lon]).addTo(macarte);
    }
</script>
{% endblock %}