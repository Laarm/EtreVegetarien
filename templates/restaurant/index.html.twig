{% extends 'base.html.twig' %}

{% block title %}Restaurants - Être Végétarien!{% endblock %}

{% block body %}
<style>
    #restaurants .nav-search i {
        position: absolute;
        padding: 10px;
        margin-top: 2px;
        color: #aaabae;
        z-index: 2;
    }

    .nav-search input {
        background-color: transparent !important;
        padding-left: 30px;
        border-radius: 200px !important;
        -moz-border-radius: 200px !important;
        -webkit-border-radius: 200px 200px 200px 200px !important;
    }

    #restaurants .produit-list-design {
        margin-top: 5%
    }

    #restaurants .produit-list-design .item {
        width: 30%;
        margin-bottom: 5%;
        -webkit-box-shadow: 0px 0px 48px -20px rgba(0, 0, 0, 0.75);
        -moz-box-shadow: 0px 0px 48px -20px rgba(0, 0, 0, 0.75);
        box-shadow: 0px 0px 48px -20px rgba(0, 0, 0, 0.75);
    }

    #restaurants .produit-list-design .item .top {
        transition-duration: .3s;
        background-color: #58D68D;
        display: flex;
        padding: 30px
    }

    #restaurants .produit-list-design .item .top img {
        width: 80%;
        margin: auto;
        transition-duration: .3s;
    }

    #restaurants .produit-list-design .item .bottom {
        transition-duration: .3s;
        background-color: #FFF;
        text-align: center;
        color: #000;
        padding: 5px 10px;
        height: 60px;
        display: flex;
    }

    #restaurants .produit-list-design .item .bottom p {
        margin: auto;
        font-weight: bolder;
    }

    #restaurants .produit-list-design .item:hover .top {
        transition-duration: .3s;
        background-color: #FFF;
    }

    #restaurants .produit-list-design .item:hover .top img {
        transition-duration: .3s;
        transform: scale(0.9);
    }

    #restaurants .produit-list-design .item:hover .bottom {
        transition-duration: .3s;
        background-color: #58D68D;
        height: 160px;
        margin-top: -100px;
    }

    #restaurants .produit-list-design .item:hover .bottom p {
        margin: auto auto 13px auto;
    }

    a.item:hover {
        text-decoration: none;
    }

    @media(max-width: 991px) {
        #restaurants .produit-list-design .item {
            width: 90%;
            margin: auto;
            margin-bottom: 5%
        }

        #restaurants .nav-search {
            width: 80%;
            margin-left: 10%
        }
    }
</style>
<section id="restaurants" class="container paddingSeperateur">
    <div class="input-group nav-search">
        <i class="fas fa-search"></i>
        <input type="text" name="search" class="form-control" placeholder="Rechercher un restaurant" value="">
    </div>
    <div class="produit-list-design flex flex-wrap flex-between">
        {% for restaurant in restaurants %}
        <a class="item" href="{{ path('restaurant_show', {'id': restaurant.id}) }}">
            <div class="top">
                <img alt="{{ restaurant.nom }}" src="{{ restaurant.image }}" />
            </div>
            <div class="bottom">
                <p>{{ restaurant.nom }}</p>
            </div>
        </a>
        {% endfor %}
    </div>
</section>
{% endblock %}
{% block javascript %}
<script>
    i = 0;
    $(document).ready(function () {
        $('[name="search"]').keypress(function (e) {
            $.getJSON("/restaurants/search?search=" + $('[name="search"]').val())
                .then((restaurants) => {
                    $('.produit-list-design').html("")
                    if (restaurants.length == 0) {
                        $('.produit-list-design').html("<p class='margin-auto'>Aucun restaurant trouvé</p>")
                    }
                    restaurants.forEach((restaurant) => {
                        $(".produit-list-design").append('<a class="item" href="/restaurant/' + restaurant.nom + '"><div class= "top"><img alt="' + restaurant.nom + '" src="' + restaurant.image + '" /></div><div class="bottom"><p>' + restaurant.nom + '</p></div></a>')
                    })
                });
        });
    });
</script>
{% endblock %}